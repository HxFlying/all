{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\src\\components\\xz\\Cart.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\src\\components\\xz\\Cart.vue","mtime":1567559496767},{"path":"C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\pro_\\vue_app_000\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      //当前用户购物车列表\n      price: \"\",\n      n: 0,\n      chk: false\n    };\n  },\n  created: function created() {\n    // 当前组件创建成功回调函数\n    this.loadMore();\n  },\n  methods: {\n    //加减数量按钮\n    chan: function chan(e) {\n      var _this = this;\n\n      //传入数量\n      var sum = e.target.dataset.counts;\n      var i = e.target.dataset.n;\n      var index = e.target.dataset.index; //判断i的正负值\n\n      if (i < 1) {\n        this.list[index].count--;\n      } else {\n        this.list[index].count++;\n      }\n\n      ;\n\n      if (this.list[index].count < 1) {\n        this.list[index].count = 0;\n        this.$messagebox.confirm(\"是否删除此商品！\") //确认内容\n        .then(function (res) {\n          _this.list.splice(index, 1);\n        }).catch(function (err) {\n          //取消后回调函数\n          console.log(err);\n        });\n      }\n    },\n    //删除全部商品按钮函数\n    delallproc: function delallproc(e) {\n      var _this2 = this;\n\n      this.$messagebox.confirm(\"是否删除全部商品！并返回商品列表页\") //确认内容\n      .then(function (res) {\n        //确认执行成功后回调用\n        if (e.target.nodeName == \"BUTTON\") {\n          //获取数组长度\n          var length = _this2.list.length;\n\n          _this2.list.splice(0, length);\n\n          _this2.$router.push(\"/product\");\n        }\n      }).catch(function (err) {\n        //取消后回调函数\n        console.log(err);\n      }); //确认，消息框 异步\n    },\n    // delallproc(e){\n    //     if(e.target.nodeName== \"BUTTON\"){\n    //       //获取数组长度\n    //        var length = this.list.length;\n    //         this.list.splice(0,length);\n    //     }\n    // },\n    // 单个删除按钮 \n    delproduct: function delproduct(e) {\n      var _this3 = this;\n\n      if (e.target.nodeName == \"BUTTON\") {\n        var i = parseInt(e.target.dataset.i);\n\n        if (this.list.length == 1) {\n          this.$messagebox.confirm(\"是否删除最后一件商品！并返回列表页\") //确认内容\n          .then(function (res) {\n            //确认执行成功后回调用\n            _this3.$router.push(\"/product\");\n          }).catch(function (err) {\n            //取消后回调函数\n            console.log(err);\n          });\n        } else {\n          this.list.splice(i, 1);\n        }\n      }\n    },\n    loadMore: function loadMore() {\n      var _this4 = this;\n\n      // 功能:获取当前用户购物车列表\n      // 1:创建url请求服务器地址\n      var url = \"carts\"; // 2：发送ajax请求 请求(让服务器程序完成功能)\n\n      this.axios.get(url).then(function (res) {\n        if (res.data.code == -1) {\n          // 4：如果服务器返回-1 请登录\n          _this4.$messagebox(\"消息\", \"请登录\").then(function (res) {\n            //回调函数(用户点击确认按钮后调用)\n            _this4.$router.push(\"/Login\");\n          });\n        } else {\n          // 3：获取服务器返回数据\n          var rows = res.data.data;\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = rows[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var item = _step.value;\n              //3.2为其添加属性cb值false\n              item.cb = false;\n            } //3.3将新数组赋值list(顺序)\n\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return != null) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n\n          _this4.list = rows;\n        }\n      });\n    }\n  },\n  computed: {\n    total: function total() {\n      // //单选按钮计算属性，选中才计算总价\n      var total = 0;\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          if (item.is_checked) {\n            total += item.price * item.count;\n          }\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      return total;\n    }\n  }\n};",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div class=\"rootstyle\">\r\n    <div class=\"h1color\">\r\n    <h1>购物车列表</h1>\r\n    </div>\r\n<div class=\"head\">\r\n    \r\n <!-- 全选按钮 --> \r\n <div class=\"allbtn\"> \r\n<label for=\"selc\">\r\n<input type=\"checkbox\"  id=\"selc\">\r\n<span class=\"allselfont\" >全选</span>\r\n</label>\r\n</div>\r\n<!-- 总删除按钮 -->\r\n<div class=\"allbtndel\">\r\n    <button @click=\"delallproc\">×</button>\r\n</div>\r\n</div>\r\n\r\n<!-- 商品列表 -->\r\n<div class=\"productstyle\" v-for=\"(item,index) of list\" :key=\"index\">\r\n    <!-- 商品编号按钮 -->\r\n    <div class=\"\">\r\n    <!-- 复选框按钮 -->\r\n   <input type=\"checkbox\" v-model=\"item.is_checked\" @click=\"ischecked\">\r\n   </div>\r\n  <!-- 商品图片 -->\r\n       <div class=\"imgstyle\">\r\n      <img :src=\"'http://127.0.0.1:8080/'+item.img_url\"  />\r\n      </div>\r\n  <!-- 商品标题和价格 -->\r\n <div class=\"productinfo\"> \r\n     <!-- 商品名字 -->\r\n     <div class=\"lnamestyle\">\r\n      <span class=\"lnamefont\">{{item.lname}}</span>\r\n      </div>\r\n      <!-- 价格 -->\r\n      <div  class=\"pricestyle\">\r\n      <span class=\"pricefont\">单价:¥{{item.price.toFixed(2)}}</span>\r\n      </div>\r\n      <!-- 商品编号 -->\r\n      <div class=\"productid\">\r\n      <span class=\"tidfont\">商品编号:{{item.id}}</span>\r\n      </div>\r\n      <div class=\"countfontstyle\">\r\n          <span class=\"numfont\">数量:</span>\r\n       <button @click=\"chan\"  :data-index=\"index\" :data-counts=\"item.count\" :data-n=\"-1\" >-</button>\r\n         <span class=\"countfont\" v-text=\"item.count\"></span>\r\n       <button @click=\"chan\" :data-counts=\"item.count\" :data-n=\"+1\" :data-index=\"index\">+</button>\r\n     </div>\r\n     <!-- 合计 -->\r\n     <div class=\"countadd\">\r\n         <h3 class=\"countaddfont\">总价:¥{{item.count*item.price}}</h3>\r\n   </div>\r\n   <!-- 单个删除按钮 -->\r\n       <div class=\"singelstyle\">\r\n    <button @click=\"delproduct\" :data-i=\"index\" >×</button>\r\n     </div>\r\n</div> \r\n\r\n</div> \r\n<div class=\"submitandsum\">\r\n<!-- 合计按钮 -->\r\n<div class=\"priceall\">\r\n    <span class=\"priceallstyle\">合计:¥{{total.toFixed(2)}}</span>\r\n</div>\r\n<!-- 提交按钮 -->\r\n<div class=\"sumbtn\"> \r\n    <mt-button class=\"substyle\" >提交</mt-button>\r\n   </div>\r\n </div>\r\n</div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return{\r\n            list:[],   //当前用户购物车列表\r\n            price:\"\",\r\n            n:0,\r\n            chk:false,\r\n          \r\n          \r\n            \r\n        }\r\n    },\r\n    created(){\r\n        // 当前组件创建成功回调函数\r\n        this.loadMore();\r\n    },\r\n     methods:{\r\n      \r\n       \r\n\r\n         //加减数量按钮\r\n         chan(e){\r\n             //传入数量\r\n             var sum=e.target.dataset.counts;\r\n             var i=e.target.dataset.n;\r\n             var index=e.target.dataset.index;\r\n             //判断i的正负值\r\n             if(i<1){\r\n             this.list[index].count--;  \r\n             }else {\r\n            this.list[index].count++;};\r\n            if(this.list[index].count<1){\r\n                this.list[index].count=0;\r\n                 this.$messagebox\r\n            .confirm(\"是否删除此商品！\")//确认内容\r\n            .then(res=>{\r\n               \r\n                this.list.splice(index,1)\r\n            }).catch(err=>{         //取消后回调函数\r\n                console.log(err);\r\n            })\r\n\r\n            }\r\n        },\r\n        //删除全部商品按钮函数\r\n        delallproc(e){\r\n            this.$messagebox\r\n            .confirm(\"是否删除全部商品！并返回商品列表页\")//确认内容\r\n            .then(res=>{          //确认执行成功后回调用\r\n                if(e.target.nodeName== \"BUTTON\"){\r\n              //获取数组长度\r\n                var length = this.list.length;\r\n                this.list.splice(0,length);\r\n                this.$router.push(\"/product\");\r\n            }\r\n            }).catch(err=>{         //取消后回调函数\r\n                console.log(err);\r\n            })\r\n            //确认，消息框 异步\r\n            \r\n        },\r\n        // delallproc(e){\r\n        //     if(e.target.nodeName== \"BUTTON\"){\r\n        //       //获取数组长度\r\n        //        var length = this.list.length;\r\n        //         this.list.splice(0,length);\r\n        //     }\r\n        // },\r\n        // 单个删除按钮 \r\n        delproduct(e){\r\n            if(e.target.nodeName== \"BUTTON\"){\r\n                var i=parseInt(e.target.dataset.i)\r\n                if(this.list.length==1){\r\n                     this.$messagebox\r\n            .confirm(\"是否删除最后一件商品！并返回列表页\")//确认内容\r\n            .then(res=>{          //确认执行成功后回调用\r\n               this.$router.push(\"/product\");\r\n           }).catch(err=>{         //取消后回调函数\r\n                console.log(err);\r\n            })\r\n             }\r\n                else{this.list.splice(i,1);}\r\n               \r\n            }\r\n\r\n        },\r\n         loadMore(){\r\n            // 功能:获取当前用户购物车列表\r\n            // 1:创建url请求服务器地址\r\n            var url=\"carts\";\r\n            // 2：发送ajax请求 请求(让服务器程序完成功能)\r\n            this.axios.get(url).then(res=>{\r\n                if(res.data.code == -1){\r\n              // 4：如果服务器返回-1 请登录\r\n              this.$messagebox(\"消息\",\"请登录\").then(res=>{\r\n                 //回调函数(用户点击确认按钮后调用)\r\n                 this.$router.push(\"/Login\")\r\n               })\r\n          }else{// 3：获取服务器返回数据\r\n                   var rows = res.data.data;\r\n               for(var item of rows){\r\n                   //3.2为其添加属性cb值false\r\n                   item.cb = false;\r\n                }\r\n                //3.3将新数组赋值list(顺序)\r\n                 this.list = rows;\r\n             }\r\n            \r\n          })\r\n         }\r\n     },\r\n     computed:{\r\n        total(){\r\n            // //单选按钮计算属性，选中才计算总价\r\n                var total=0;\r\n                for(var item of this.list){\r\n                    if(item.is_checked){\r\n                       \r\n                     total+=item.price*item.count\r\n                      }\r\n           }  return total;\r\n         }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n/* 最外层浮动换行 */\r\n.rootstyle{\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n   \r\n    \r\n}\r\n/* 商品列表最外面 */\r\n.productstyle{\r\n  display: flex;\r\n  padding: 5px;\r\n  border:1px solid #ccc;\r\n  width:100%;\r\n  border:2px solid red;\r\n  border-radius: 5px;\r\n \r\n  \r\n}\r\n/* 信息和价格最外面样式 */\r\n.productinfo{\r\n    margin-left:10px; \r\n    padding-top: 10px;\r\n    \r\n}\r\n/* 头部样式 */\r\n.head,.h1color{\r\n    background-color:red;\r\n    width: 100%;\r\n    color:floralwhite;\r\n    padding: 1px;\r\n   \r\n \r\n\r\n  \r\n}\r\n/* 头部文字样式 */\r\n.headfont{\r\n    font-size: 20px;\r\n    text-align: center;\r\n    \r\n     \r\n}\r\n/* 全选按钮样式 */\r\n.allbtn{\r\n    margin-left:5px; \r\n}\r\n/* 全选按钮文字样式 */\r\n.allselfont{\r\n    font-size: 15px;\r\n    \r\n}\r\n/* 图片样式 */\r\n.imgstyle{\r\n    margin-left: 5px;\r\n}\r\n/* 商品名字样式 */\r\n.lnamefont{\r\n    font-size: 18px;\r\n    font-weight:bold\r\n}\r\n/* 单价、数量 、总价样式 */\r\n.pricefont,.countaddfont,.tidfont,.numfont{\r\n    font-size:13px;\r\n    color: #666;\r\n}\r\n/* 价格字样式 */\r\n.countaddfont,.pricefont{\r\n    color:red;\r\n}\r\n/* 单个删除button样式 */\r\n.singelbtn{\r\n        font-style: italic;\r\n        color:red;\r\n        font-size: 10px;\r\n}\r\n/* 单个删除按钮 */\r\n.singelstyle{\r\n    margin-left:150px; \r\n}\r\n/* head样式 */\r\n.head{\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n/* 总删除按钮 */\r\n.allbtndel{\r\n    margin-right:5px;\r\n    margin-bottom:5px;  \r\n}\r\n/* 合计样式 */\r\n.priceall{\r\n   \r\n    width: 100%;\r\n   \r\n    line-height: 100px;\r\n    font-size: 25px;\r\n    margin-left: 10px;\r\n   \r\n}\r\n/* 合计文字样式 */\r\n.priceallstyle{\r\n   font-style: italic;\r\n    height:40px;\r\n    color:#000;\r\n    font-size: 25px\r\n    \r\n}\r\n/* 提交和合计样式 */\r\n.submitandsum{\r\n background-color: red;\r\n display: flex;\r\n justify-content: space-around;\r\n width: 100%;\r\n border:1px solid #fff;\r\n padding: 2px;\r\n border-radius: 5px;\r\n}\r\n/* 提交按钮 */\r\n.sumbtn{\r\n    display: flex;\r\n   justify-content: space-around;\r\n   width:80px;\r\n   margin-right:20px; \r\n   align-items: center;\r\n \r\n}\r\n/* 提交按钮样式 */\r\n.substyle{\r\n    color:red;\r\n    \r\n    background-color: aliceblue\r\n\r\n}\r\n/* 总价文字样式 */\r\n.countaddfont{\r\n    margin:0;\r\n  \r\n   \r\n}\r\n\r\n/* 数量字体样式 */\r\n.countfont{\r\n    font-size: 10px;\r\n    min-width: 20px;\r\n    padding: 5px;\r\n    margin:0 5px; \r\n    \r\n   \r\n}\r\n\r\n\r\n</style>"],"sourceRoot":"src\\components\\xz"}]}